<!DOCTYPE html>
<html>
<head>
    <title>dropwizard-bars</title>
    <script type="text/javascript" src="jquery-1.7.1.min.js"></script>
    <script type="text/javascript">
        function loadBars() {
            $.get("/app/listBars", function(data) {
                $("#bars").empty()
                $.each(data, function(i, bar) {
                    $("#bars").append("<li>Bar: " + bar.name + "</li>")
                })
            })
        }
        
        $(function() {
            $("#barForm").bind("submit", function(event) {
                event.preventDefault()
                $.ajax({
                    type: 'POST',
                    contentType: 'application/json',
                    url: "/app/addBar",
                    data: JSON.stringify({name: $("#barName").val()}),
                    dataType: 'json',
                    success: loadBars
                })
                $("#barName").val("")
            })
            
            loadBars()
        })
    </script>
</head>
<body>
<ul id="bars"></ul>
<form id="barForm" action="#">
    <input id="barName" name="name"/>
    <input type="submit"/>
</form>
</body>
</html>